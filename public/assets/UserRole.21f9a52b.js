import{aV as $,r as s,V as q,u as Q,o as _,bl as z,k as c,n as y,d as t,m as r,x,l as C,q as d,p as B,F as T,a1 as V,a2 as N,a3 as U}from"./index.27345aab.js";import{Q as F}from"./QToolbar.2291239e.js";import{Q as S,h as D,a as E}from"./moment.a2f9b315.js";import{u as L,Q as O}from"./use-quasar.d05cac39.js";import{Q as M}from"./es.ac09a5b9.js";import j from"./supabase.ebda3817.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.7be168b6.js";import"./_commonjsHelpers.d2428edb.js";import"./index.ec59db62.js";const H=$({setup(){const a=L();s([]);const{user:u}=q(),{supabase:n}=j(),m=s(!0),b=s("");Q();const f=[{value:"662273d0-3830-4c16-af8e-e7a2a5384e49",label:"SuperAdmin"},{value:"171b07e2-de6c-4b2f-bd94-039676a7cf9b",label:"Controller"},{value:"2d5ec1d4-ce3e-4be9-a8c6-7a6aaae16a79",label:"Administradores"},{value:"e0a49454-2818-49d8-8f01-cfd6709ea721",label:"Usuarios"}],o=[{name:"Usuario",required:!0,label:"Usuario",align:"left",field:e=>e.email,format:e=>`${e}`,sortable:!0},{name:"Role",required:!0,align:"center",label:"Role",field:e=>e.bizrole.role,format:e=>`${e}`,sortable:!0},{name:"CreateAt",align:"center",label:"Fecha de Creacion",field:e=>h(e.created_at),format:e=>`${e}`,sortable:!0},{name:"actions",label:"Actions",field:"",align:"center"}],l=s(["CreateBy","CreateAt","actions"]),p=s([]),h=e=>D(e).locale("es").fromNow(),v=async()=>{(await n.from("bizrolebyuser").select("*").eq("userid",u.value.id)).status===200&&(m.value=!1);let i=await n.from("bizrolebyuser").select("*,bizrole(*)");i.status===200&&(p.value=i.data)};_(async()=>{v()});const w=e=>{a.dialog({title:"Role",message:`A\xF1ade el Role para: ${e.row.email}`,options:{type:"radio",model:"opt1",items:f},cancel:!0,persistent:!0}).onOk(async i=>{const R=f.find(A=>A.value===i);await n.from("bizrolebyuser").update({roleid:R.value}).eq("userid",e.row.userid),v()}).onCancel(()=>{}).onDismiss(()=>{})},g=()=>{a.dialog({title:"Role",message:`A\xF1ade el Role para: ${u.value.email}`,options:{type:"radio",model:"opt1",items:[{value:"662273d0-3830-4c16-af8e-e7a2a5384e49",label:"SuperAdmin"},{value:"171b07e2-de6c-4b2f-bd94-039676a7cf9b",label:"Controller"},{value:"2d5ec1d4-ce3e-4be9-a8c6-7a6aaae16a79",label:"Administradores"},{value:"e0a49454-2818-49d8-8f01-cfd6709ea721",label:"Usuarios"}]},cancel:!0,persistent:!0}).onOk(e=>{console.log(e)}).onCancel(()=>{}).onDismiss(()=>{})};z(()=>{l.value=a.screen.width>600?["CreateBy","CreateAt","actions"]:["actions"]});const k=e=>{};return{columns:o,rows:p,showAdd:m,visibleColumns:l,selected:s([]),dato:s(!1),editRow:k,addRole:g,editRole:w,show:b}}}),I={class:"q-pa-md q-gutter-y-sm"};function J(a,u,n,m,b,f){return c(),y("div",I,[t(F,{class:"bg-primary q-py-sm text-white",style:{"padding-top":"1rem"}},{default:r(()=>[a.showAdd?(c(),C(d,{key:0,stack:"",flat:"",size:"12px","no-caps":"",class:"q-mx-sm",label:"Nuevo",onClick:a.addRole,icon:"fa-solid fa-file-circle-plus",style:{"line-height":"1.5rem"}},null,8,["onClick"])):B("",!0),t(d,{flat:"",stack:"",size:"12px","no-caps":"",class:"q-mx-sm",label:"Ver Todos",icon:"fas fa-folder-tree",style:{"line-height":"1.5rem"}})]),_:1}),x("div",null,[t(S,{title:"Roles de Usuario",rows:a.rows,columns:a.columns,"visible-columns":a.visibleColumns,"row-key":"email",dense:""},{header:r(o=>[t(O,{props:o},{default:r(()=>[(c(!0),y(T,null,V(o.cols,l=>(c(),C(E,{key:l.name,props:o,class:"text-italic",style:{color:"#d4aa70","font-size":"1rem"}},{default:r(()=>[N(U(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-actions":r(o=>[t(M,{props:o},{default:r(()=>[t(d,{dense:"",round:"",flat:"",color:"grey",onClick:l=>a.editRole(o),icon:"edit"},null,8,["onClick"]),t(d,{dense:"",round:"",flat:"",color:"grey",onClick:l=>a.deleteRow(o),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","visible-columns"])])])}var se=G(H,[["render",J]]);export{se as default};
