import{h as D,C as R,c as $,a1 as $e,ac as Le,ad as Ue,ae as Ve,r as f,af as Oe,ag as De,ah as He,ai as Ae,aj as Be,w as I,a2 as ee,ak as te,al as ae,a4 as Ie,am as Ne,g as Re,H as Fe,I as Me,l as u,s as v,t as a,a8 as oe,j as l,v as O,x as E,d as t,Q as T,y as de,z as ce,B as me,O as S,an as je,aa as fe,ao as ge,m as F,ap as ze,R as ve,aq as M,u as We,ar as Ge,as as Je,F as pe,a9 as Ke,at as Xe,au as Ye,n as H,P as re,W as Ze,N as et,av as tt}from"./index.fbcfccda.js";import{Q as j,a as at,b as ot}from"./QDrawer.4ef1ab69.js";import{u as rt,v as le,a as lt,p as ne,b as nt,c as st,r as se,s as it,d as ie,e as ut,Q as L,f as z,g as we,h as dt,i as ct}from"./QMenu.2ac3a81d.js";import{Q as W}from"./QToolbar.f7890de0.js";import{C as mt,Q as ft}from"./ClosePopup.23db4900.js";import{Q as gt,a as vt}from"./QLayout.f93f145a.js";import{Q as pt,_ as he}from"./ErrorsBanner.8ae8f481.js";import{u as wt,_ as ht}from"./useLogin.8f42e7f6.js";import{_ as _t}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.1fe933b9.js";import"./QBanner.e2b4b5c5.js";const yt=D("div",{class:"q-space"});var ue=R({name:"QSpace",setup(){return()=>yt}});const bt=["top","middle","bottom"];var Ct=R({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>bt.includes(e)}},setup(e,{slots:n}){const r=$(()=>e.align!==void 0?{verticalAlign:e.align}:null),o=$(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>D("div",{class:o.value,style:r.value,role:"alert","aria-label":e.label},$e(n.default,e.label!==void 0?[e.label]:[]))}}),N=R({name:"QTooltip",inheritAttrs:!1,props:{...rt,...Le,...Ue,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:le},self:{type:String,default:"top middle",validator:le},offset:{type:Array,default:()=>[14,14],validator:lt},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Ve],setup(e,{slots:n,emit:r,attrs:o}){let s,d;const h=Re(),{proxy:{$q:i}}=h,g=f(null),c=f(!1),P=$(()=>ne(e.anchor,i.lang.rtl)),p=$(()=>ne(e.self,i.lang.rtl)),Q=$(()=>e.persistent!==!0),{registerTick:b,removeTick:_}=Oe(),{registerTimeout:k,removeTimeout:w}=De(),{transition:y,transitionStyle:C}=He(e,c),{localScrollTarget:G,changeScrollEvent:_e,unconfigureScrollTarget:ye}=nt(e,Y),{anchorEl:x,canShow:be,anchorEvents:U}=st({showing:c,configureAnchorEl:Qe}),{show:Ce,hide:A}=Ae({showing:c,canShow:be,handleShow:ke,handleHide:xe,hideOnRouteChange:Q,processOnMount:!0});Object.assign(U,{delayShow:Se,delayHide:Ee});const{showPortal:J,hidePortal:K,renderPortal:Pe}=Be(h,g,Te);if(i.platform.is.mobile===!0){const m={anchorEl:x,innerRef:g,onClickOutside(q){return A(q),q.target.classList.contains("q-dialog__backdrop")&&Me(q),!0}},B=$(()=>e.modelValue===null&&e.persistent!==!0&&c.value===!0);I(B,q=>{(q===!0?ut:se)(m)}),ee(()=>{se(m)})}function ke(m){_(),w(),J(),b(()=>{d=new MutationObserver(()=>V()),d.observe(g.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),Y()}),s===void 0&&(s=I(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,V)),k(()=>{J(!0),r("show",m)},e.transitionDuration)}function xe(m){_(),w(),K(),X(),k(()=>{K(!0),r("hide",m)},e.transitionDuration)}function X(){d!==void 0&&(d.disconnect(),d=void 0),s!==void 0&&(s(),s=void 0),ye(),te(U,"tooltipTemp")}function V(){const m=g.value;x.value===null||!m||it({el:m,offset:e.offset,anchorEl:x.value,anchorOrigin:P.value,selfOrigin:p.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Se(m){if(i.platform.is.mobile===!0){ie(),document.body.classList.add("non-selectable");const B=x.value,q=["touchmove","touchcancel","touchend","click"].map(Z=>[B,Z,"delayHide","passiveCapture"]);ae(U,"tooltipTemp",q)}k(()=>{Ce(m)},e.delay)}function Ee(m){w(),i.platform.is.mobile===!0&&(te(U,"tooltipTemp"),ie(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),k(()=>{A(m)},e.hideDelay)}function Qe(){if(e.noParentEvent===!0||x.value===null)return;const m=i.platform.is.mobile===!0?[[x.value,"touchstart","delayShow","passive"]]:[[x.value,"mouseenter","delayShow","passive"],[x.value,"mouseleave","delayHide","passive"]];ae(U,"anchor",m)}function Y(){if(x.value!==null||e.scrollTarget!==void 0){G.value=Ie(x.value,e.scrollTarget);const m=e.noParentEvent===!0?V:A;_e(G.value,m)}}function qe(){return c.value===!0?D("div",{...o,ref:g,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,C.value],role:"complementary"},Fe(n.default)):null}function Te(){return D(Ne,{name:y.value,appear:!0},qe)}return ee(X),Object.assign(h.proxy,{updatePosition:V}),Pe}}),Pt="/assets/logo.3dcf6567.png";const kt={__name:"UpdatePasswordForm",props:{email:{required:!1,type:String,default:null},currentPassword:{required:!1,type:String,default:null},password:{required:!0,type:String},passwordConfirmation:{required:!1,type:String,default:null},validationErrors:{required:!1,type:Object,default(){return{}}}},emits:["update:email","update:currentPassword","update:password","update:passwordConfirmation"],setup(e,{emit:n}){return(r,o)=>(u(),v(l(pt),null,{default:a(()=>{var s,d,h,i,g,c,P,p,Q,b,_,k;return[oe(r.$slots,"top"),typeof e.email=="string"?(u(),v(l(O),{key:0,filled:"",label:"Email","model-value":e.email,error:!!((s=e.validationErrors)!=null&&s.email),"error-message":(h=(d=e.validationErrors)==null?void 0:d.email)==null?void 0:h[0],class:"q-mb-md","hide-bottom-space":"","onUpdate:modelValue":o[0]||(o[0]=w=>n("update:email",w))},null,8,["model-value","error","error-message"])):E("",!0),typeof e.currentPassword=="string"?(u(),v(l(O),{key:1,filled:"",type:"password",label:"Current Password","model-value":e.currentPassword,error:!!((i=e.validationErrors)!=null&&i.current_password),"error-message":(c=(g=e.validationErrors)==null?void 0:g.current_password)==null?void 0:c[0],class:"q-mb-lg","hide-bottom-space":"","onUpdate:modelValue":o[1]||(o[1]=w=>n("update:currentPassword",w))},null,8,["model-value","error","error-message"])):E("",!0),typeof e.password=="string"?(u(),v(l(O),{key:2,filled:"",type:"password",label:"New Password","model-value":e.password,error:!!((P=e.validationErrors)!=null&&P.password),"error-message":(Q=(p=e.validationErrors)==null?void 0:p.password)==null?void 0:Q[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":o[2]||(o[2]=w=>n("update:password",w))},null,8,["model-value","error","error-message"])):E("",!0),typeof e.passwordConfirmation=="string"?(u(),v(l(O),{key:3,filled:"",type:"password",label:"Confirm New Password","model-value":e.passwordConfirmation,error:!!((b=e.validationErrors)!=null&&b.password_confirmation),"error-message":(k=(_=e.validationErrors)==null?void 0:_.password_confirmation)==null?void 0:k[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":o[3]||(o[3]=w=>n("update:passwordConfirmation",w))},null,8,["model-value","error","error-message"])):E("",!0),oe(r.$slots,"bottom")]}),_:3}))}},xt=S("Confirm Identity"),St=S(" When making sensitive changes to your account, we ask you to login again if it's been a while. "),Et={__name:"ReauthenticateDialog",setup(e){const{isReauthenticating:n,form:r,validationErrors:o,login:s,hasErrors:d,errors:h,loading:i,resetForm:g,attemptSetEmailOnForm:c}=wt();n.value=!0;const P=f();c();async function p(){await s(),d.value||P.value.hide()}return(Q,b)=>(u(),v(me,{ref_key:"dialogComponent",ref:P,onHide:l(g),onShow:l(c)},{default:a(()=>[t(ce,{style:{"max-width":"300px"},class:"full-width"},{default:a(()=>[t(W,null,{default:a(()=>[t(j,null,{default:a(()=>[xt]),_:1}),t(T,{icon:"question_mark",color:"primary",size:"sm",round:"",flat:""},{default:a(()=>[t(N,{class:"bg-primary","max-width":"300px",style:{"font-size":"1.2em"},anchor:"bottom right",self:"top right"},{default:a(()=>[St]),_:1})]),_:1})]),_:1}),t(de,null,{default:a(()=>[t(ht,{email:l(r).email,"onUpdate:email":b[0]||(b[0]=_=>l(r).email=_),password:l(r).password,"onUpdate:password":b[1]||(b[1]=_=>l(r).password=_),"validation-errors":l(o)},null,8,["email","password","validation-errors"]),l(d)?(u(),v(he,{key:0,errors:l(h)},null,8,["errors"])):E("",!0)]),_:1}),t(T,{class:"full-width",label:"Login",color:"primary",loading:l(i),onClick:p},null,8,["loading"])]),_:1})]),_:1},8,["onHide","onShow"]))}};var Qt=()=>{const{form:e,update:n,loading:r,errors:o,hasErrors:s,validationErrors:d,hasValidationErrors:h,requiresReauthentication:i,resetErrors:g,resetForm:c}=je();return{update:n,form:e,resetForm:c,loading:r,requiresReauthentication:i,errors:o,hasErrors:s,validationErrors:d,hasValidationErrors:h,resetErrors:g}};const qt=S("Change Password"),Tt={key:0},$t={__name:"UpdatePasswordDialog",setup(e){var k;const n=f(),{form:r,loading:o,requiresReauthentication:s,errors:d,hasErrors:h,update:i,validationErrors:g,hasValidationErrors:c,resetErrors:P,resetForm:p}=Qt();async function Q(){P(),await i(),h.value||n.value.hide()}const{user:b}=fe();typeof r.value.email=="string"&&((k=b.value)==null?void 0:k.email)&&(r.value.email=b.value.email);const _=f(!1);return s!==void 0&&I(s,w=>{w&&(_.value=!0)}),(w,y)=>(u(),v(me,ve({ref_key:"dialogComponent",ref:n},w.$attrs,{onHide:l(p)}),{default:a(()=>[t(ce,null,{default:a(()=>[t(W,null,{default:a(()=>[t(j,null,{default:a(()=>[qt]),_:1}),ge(t(T,{icon:"close",round:"",flat:""},null,512),[[mt]])]),_:1}),t(de,null,{default:a(()=>[t(kt,{email:l(r).email,"onUpdate:email":y[0]||(y[0]=C=>l(r).email=C),"current-password":l(r).current_password,"onUpdate:current-password":y[1]||(y[1]=C=>l(r).current_password=C),password:l(r).password,"onUpdate:password":y[2]||(y[2]=C=>l(r).password=C),"password-confirmation":l(r).password_confirmation,"onUpdate:password-confirmation":y[3]||(y[3]=C=>l(r).password_confirmation=C),"validation-errors":l(g)},null,8,["email","current-password","password","password-confirmation","validation-errors"]),l(c)?E("",!0):(u(),F("div",Tt,[t(he,{errors:l(d)},null,8,["errors"])]))]),_:1}),t(T,{label:"update",loading:l(o),class:"full-width",color:"primary",onClick:Q,onContextmenu:y[4]||(y[4]=ze(C=>_.value=!0,["prevent"]))},null,8,["loading"]),l(s)!==void 0?(u(),v(Et,{key:0,modelValue:_.value,"onUpdate:modelValue":y[5]||(y[5]=C=>_.value=C)},null,8,["modelValue"])):E("",!0)]),_:1})]),_:1},16,["onHide"]))}},Lt={},Ut=S(" Change Password ");function Vt(e,n){return u(),v(z,ve({clickable:""},e.$attrs),{default:a(()=>[t(L,{side:""},{default:a(()=>[t(M,{name:"key"})]),_:1}),t(L,null,{default:a(()=>[Ut]),_:1})]),_:1},16)}var Ot=_t(Lt,[["render",Vt]]),Dt=()=>{const e=We(),{logout:n,loading:r}=Ge();async function o(){await n(),e.push("/login")}return{logout:n,loading:r,onLogoutClicked:o}};const Ht=S(" Logout "),At={__name:"LogoutItem",setup(e){const{loading:n,onLogoutClicked:r}=Dt();return(o,s)=>(u(),v(z,{clickable:"",onClick:l(r)},{default:a(()=>[t(L,{side:""},{default:a(()=>[l(n)?(u(),v(Je,{key:1,size:"sm",color:"primary"})):(u(),v(M,{key:0,name:"logout"}))]),_:1}),t(L,null,{default:a(()=>[Ht]),_:1})]),_:1},8,["onClick"]))}},Bt={__name:"AccountMenu",setup(e){const n=f(!1);return(r,o)=>(u(),F(pe,null,[t(dt,{"auto-close":""},{default:a(()=>[t(we,null,{default:a(()=>[t(At),t(Ot,{onClick:o[0]||(o[0]=s=>n.value=!0)})]),_:1})]),_:1}),t($t,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=s=>n.value=s)},null,8,["modelValue"])],64))}};const It=H("img",{src:Pt},null,-1),Nt={class:"q-ml-sm"},Rt={class:"q-gutter-sm row items-center no-wrap"},Ft=S(" 2 "),Mt=S("Notificaciones"),jt=H("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),zt=S("Usuario"),ra={__name:"PrincipalLayout",setup(e){const{user:n}=fe(),{identity:r}=Ke();console.log("user",n),console.log("identity",r);const o=f(!1);f(""),f(!1),f(!1),f(""),f(""),f(""),f(""),f("Any time");function s(){o.value=!o.value}const d=Xe();d.charAt(0).toUpperCase()+d.slice(1);const h=f(n.value.email),i=f([{icon:"web",text:"Escritorio",route:"/dashboard"},{icon:"memory",text:"Plantilla de Inventario",route:"/managerinventorytemplate"},{icon:"star_border",text:"Inventario F\xEDsico",route:"/managerinventory"}]);return(g,c)=>{const P=Ye("router-view");return u(),v(gt,{view:"hHh lpR fFf",class:"bg-grey-1"},{default:a(()=>[t(at,{elevated:"",class:"bg-white text-grey-8","height-hint":"64"},{default:a(()=>[t(W,{class:"__toolbar"},{default:a(()=>[t(T,{flat:"",dense:"",round:"",onClick:s,"aria-label":"Menu",icon:"menu",class:"q-mr-sm"}),g.$q.screen.width>400?(u(),v(j,{key:0,shrink:"",class:"row items-center no-wrap"},{default:a(()=>[It,H("span",Nt,re(h.value),1)]),_:1})):E("",!0),t(ue),t(ue),H("div",Rt,[t(T,{round:"",dense:"",flat:"",color:"grey-8",icon:"notifications"},{default:a(()=>[t(Ct,{color:"red","text-color":"white",floating:""},{default:a(()=>[Ft]),_:1}),t(N,null,{default:a(()=>[Mt]),_:1})]),_:1}),t(T,{round:"",flat:""},{default:a(()=>[t(Ze,{size:"26px"},{default:a(()=>[jt]),_:1}),t(N,null,{default:a(()=>[zt]),_:1}),t(Bt)]),_:1})])]),_:1})]),_:1}),t(ot,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=p=>o.value=p),"show-if-above":"",bordered:"",class:"bg-white",width:240},{default:a(()=>[t(ft,{class:"fit"},{default:a(()=>[t(we,{padding:"",class:"text-grey-8"},{default:a(()=>[(u(!0),F(pe,null,et(i.value,p=>ge((u(),v(z,{class:"__drawer-item",key:p.text,clickable:"",to:p.route},{default:a(()=>[t(L,{avatar:""},{default:a(()=>[t(M,{name:p.icon},null,8,["name"])]),_:2},1024),t(L,null,{default:a(()=>[t(ct,null,{default:a(()=>[S(re(p.text),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])),[[tt]])),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(vt,null,{default:a(()=>[t(P)]),_:1})]),_:1})}}};export{ra as default};
