import{l as h,s as y,t as q,a8 as f,d as g,j as m,v as c,u as F,a9 as S,aa as k}from"./index.96bddb58.js";import{Q as L}from"./ErrorsBanner.330693ed.js";const C={__name:"LoginForm",props:{email:{required:!0,type:String},password:{required:!0,type:String},validationErrors:{required:!1,type:Object,default(){return{}}}},emits:["update:email","update:password"],setup(e,{emit:r}){return(l,a)=>(h(),y(m(L),null,{default:q(()=>{var s,i,n,o,u,d;return[f(l.$slots,"top"),g(m(c),{filled:"",label:"Email","model-value":e.email,error:!!((s=e.validationErrors)!=null&&s.email),"error-message":(n=(i=e.validationErrors)==null?void 0:i.email)==null?void 0:n[0],class:"q-mb-md","hide-bottom-space":"","onUpdate:modelValue":a[0]||(a[0]=t=>r("update:email",t))},null,8,["model-value","error","error-message"]),g(m(c),{filled:"",type:"password",label:"Password","model-value":e.password,error:!!((o=e.validationErrors)!=null&&o.password),"error-message":(d=(u=e.validationErrors)==null?void 0:u.password)==null?void 0:d[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":a[1]||(a[1]=t=>r("update:password",t))},null,8,["model-value","error","error-message"]),f(l.$slots,"bottom")]}),_:3}))}};var Q=()=>{const e=F(),{form:r,loading:l,errors:a,hasErrors:s,validationErrors:i,hasValidationErrors:n,login:o,isReauthenticating:u,resetForm:d,resetErrors:t}=S(),{user:p}=k();async function w(){t(),await o(),s.value||e.push({name:"dashboard"})}function E(){e.push({name:"auth.requestPasswordReset"})}function b(){var v;typeof r.value.email=="string"&&((v=p.value)==null?void 0:v.email)&&(r.value.email=p.value.email)}return{onLoginClicked:w,onForgotPasswordClicked:E,form:r,loading:l,errors:a,hasErrors:s,validationErrors:i,hasValidationErrors:n,login:o,resetForm:d,isReauthenticating:u,attemptSetEmailOnForm:b}};export{C as _,Q as u};
